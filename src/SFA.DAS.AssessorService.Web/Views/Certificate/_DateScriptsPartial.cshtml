<script>
  var epaoDateFormElement = $('.apprentice-date-form');
  var epaoDateValidationRulesObject = {
    ignore: ':hidden:not(#fullDate)',
    rules: {
      Day: {
        required: true,
        number: true,
        range: [1, 31]
      },
      Month: {
        required: true,
        number: true,
        range: [1, 12]
      },
      Year: {
        required: true,
        number: true,
        minlength: 4,
        maxlength: 4
      },
      fullDate: {
        noFutureDate: true
      }
    },
    messages: {
      Day: {
        required: 'Enter the achievement day',
        number: 'Day must be a number',
        range: 'Enter a valid day'
      },
      Month: {
        required: 'Enter the achievement month',
        number: 'Month must be a number',
        range: 'Enter a valid month'
      },
      Year: {
        required: 'Enter the achievement year',
        number: 'Year must be a number',
        minlength: 'Enter a valid year',
        maxlength: 'Enter a valid year'
      },
      fullDate: {
        noFutureDate: 'Enter an achievement date in the past'
      }
    }
  };

  GOVUK.epaoValidate(epaoDateFormElement, epaoDateValidationRulesObject);

  $(document).ready(function () {

    // Populate hidden field
    getFullDate();
    $(".date-input").on('keyup input', getFullDate);

    function getFullDate() {
      $("#fullDate").val($('[name="Day"]').val() + "/" + $('[name="Month"]').val() + "/" + $('[name="Year"]').val());
    }

    // Only allow integers
    $('.js-integers-only').on('keydown', function (e) {
      // Allow: backspace, delete, tab, escape and enter
      if (
        $.inArray(e.keyCode, [46, 8, 9, 27, 13]) !== -1 ||
        // Allow: Ctrl/cmd+A
        (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||
        // Allow: Ctrl/cmd+C
        (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||
        // Allow: Ctrl/cmd+X
        (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||
        // Allow: home, end, left, right
        (e.keyCode >= 35 && e.keyCode <= 39)
      ) {
        // let it happen, don't do anything
        return;
      }
      // Ensure that it is a number and stop the keypress
      if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
        e.preventDefault();
      }
    });
  });

</script>