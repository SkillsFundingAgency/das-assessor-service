@using SFA.DAS.AssessorService.ApplyTypes
@model SFA.DAS.AssessorService.ApplyTypes.ApplicationSequence

@{
    ViewBag.Title = "Application overview";
}

<div class="grid-row">
    <div class="column-two-thirds">
        <h1 class="heading-xlarge">Application overview</h1>
        <ul class="govuk-list">
            @foreach (var applicationSection in Model.Sections.OrderBy(s => s.SectionId))
            {
                <li>
                    <h2 class="heading-medium heading-medium--small-margin-bottom">
                        @applicationSection.LinkTitle
                    </h2>
                    <span id="company-details-hint" class="form-hint form-hint--margin-bottom">
                        @applicationSection.PagesComplete of @applicationSection.PagesActive questions completed
                    </span>
                    <a href="@Url.Action("Section", "Application", new {applicationSection.ApplicationId, applicationSection.SequenceId, applicationSection.SectionId})">
                        Go to @applicationSection.LinkTitle.ToLower()
                    </a>
                    @if (applicationSection.HasNewFeedback)
                    {
                        <span class="form-label-bold">Feedback added</span>
                    }
                    @if (applicationSection.HasReadFeedback)
                    {
                        <span class="form-label-bold">Answer updated</span>
                    }
                </li>
                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
            }
        </ul>

        <form asp-controller="Application" asp-action="Return" asp-route-applicationId="@Model.ApplicationId" asp-route-sequenceId="@Model.SequenceId">
            @if (Model.HasNewFeedback)
            {
                <button class="button" type="submit" name="ReturnType" value="ReturnWithFeedback">Return with feedback</button>
            }
            else
            {
                <button class="button" type="submit" name="ReturnType" value="Approve">Approve</button>
                <button class="button" type="submit" name="ReturnType" value="Reject">Reject</button>
            }
            
        </form>
        
    </div>
</div>