@using SFA.DAS.AssessorService.ApplyTypes
@model SFA.DAS.AssessorService.ApplyTypes.ApplicationSequence

@{
    ViewBag.Title = "title";
}

<main class="govuk-main-wrapper " id="main-content" role="main">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h1 class="govuk-heading-xl">Application overview</h1>

            <ul class="govuk-list">
                @foreach (var applicationSection in Model.Sections.OrderBy(s => s.SectionId))
                {
                    <li>
                        <h2 class="gvuk-heading-m">
                            @applicationSection.LinkTitle
                        </h2>
                        <span id="company-details-hint" class="govuk-hint apply-hint">
                            @applicationSection.PagesComplete of @applicationSection.PagesActive questions completed
                        </span>
                        
                            <a href="@Url.Action("Section", "Application", new {applicationSection.ApplicationId, applicationSection.SequenceId, applicationSection.SectionId})">
                                Go to @applicationSection.LinkTitle.ToLower()
                            </a>
                        @if (applicationSection.HasNewFeedback)
                        {
                            <span class="form-label-bold">Feedback added</span>
                        }
                        @if (applicationSection.HasReadFeedback)
                        {
                            <span class="form-label-bold">Answer updated</span>
                        }
                    </li>
                    <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
                }
            </ul>

            <form asp-controller="Application" asp-action="Return" asp-route-applicationId="@Model.ApplicationId" asp-route-sequenceId="@Model.SequenceId">
                @if (Model.HasNewFeedback)
                {
                    <button type="submit" name="ReturnType" value="ReturnWithFeedback">Return with feedback</button>
                }
                else
                {
                    <button type="submit" name="ReturnType" value="Approve">Approve</button>
                    <button type="submit" name="ReturnType" value="Reject">Reject</button>
                }
                
            </form>
           
        </div>
    </div>
</main>