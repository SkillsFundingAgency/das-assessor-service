@using Newtonsoft.Json
@using SFA.DAS.AssessorService.Domain.JsonData
@using SFA.DAS.AssessorService.Domain.Consts

@model SFA.DAS.AssessorService.Web.Staff.Controllers.DuplicateRequestViewModel

@{
    ViewBag.Title = "Re-print certificate";
    Layout = "_Layout";
}

<div class="grid-row">
    <div class="column-two-thirds">
        @if (Model.BackToCheckPage)
        {
            <a class="link-back" asp-controller="CertificateAmend" asp-action="Check" asp-route-certificatereference=@Model.CertificateReference asp-route-certificateId="@Model.CertificateId" asp-route-uln=@Model.Uln asp-route-stdcode=@Model.StdCode asp-route-page=@Model.Page asp-route-searchstring=@Model.SearchString>Back</a>
        }
        else
        {
            <a class="link-back" asp-controller="Search" asp-action="Select" asp-route-certificatereference=@Model.CertificateReference  asp-route-certificateId="@Model.CertificateId"  asp-route-stdcode="@Model.StdCode" asp-route-uln="@Model.Uln" asp-route-searchstring="@Model.SearchString" asp-route-page="@Model.Page">Back</a>
        }

        <h1 class="heading-large">Re-print certificate</h1>
        @if (! (Model.Status == CertificateStatus.Printed || Model.Status == CertificateStatus.Reprint) )
        {
            <p>Certificate is in an invalid status to request a reprint.</p>
        }
        else if (!Model.IsConfirmed)
        {
            <p class="lede text">Request a duplicate print of the following certificate: </p>

            <div class="grid-row">
                <div class="column-one-half">
                    <table>
                        <tbody>
                            <tr>
                                <td class="bold">Certificate number</td>
                                <td>@Model.CertificateReference</td>
                            </tr>
                            <tr>
                                <td class="bold">Name</td>
                                <td>@Model.FullName</td>
                            </tr>
                            <tr>
                                <td class="bold"><abbr title="Unique learner number">ULN</abbr></td>
                                <td>@Model.Uln</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <form asp-action="Index" asp-controller="DuplicateRequest" method="post">
                @Html.HiddenFor(m => m.CertificateId)
                @Html.HiddenFor(m => m.SearchString)
                <button class="button">Confirm reprint</button>
            </form>
            <br />
            <form asp-action="Check" asp-controller="CertificateAmend" method="get">
                @Html.Hidden("certificateId", Model.CertificateId, new { @id = "certificateId" })
                @Html.Hidden("searchString", Model.SearchString, new { @id = "searchString" })
                <button class="button">Amend before reprint</button>
            </form>
        }
        else
        {
            <p>Certificate reprint requested.</p>
            <p>Will be processed in next Print Run scheduled for @Model.NextBatchDate</p>
        }
    </div>
</div>